<!DOCTYPE html>
<html>

<head>
    <title>Load Data Debug Test</title>
</head>

<body>
    <h1>Load Data Debug Test</h1>
    <div id="output"></div>

    <script>
        // Test the current data structure from your screenshot
        const sampleData = {
            "2024-12-27T06:00:00+00:00": {
                "pv_p": 0,
                "battery_p": -500.5,
                "grid_p": 1234.2,
                "load_p": 733.7  // This should be the actual load
            },
            "2024-12-27T06:30:00+00:00": {
                "pv_p": 0,
                "battery_p": -1000.0,
                "grid_p": 2000.5,
                "load_p": 1000.5
            }
        };

        console.log('=== TESTING LOAD DATA PROCESSING ===');

        let output = '<h2>Sample Data Structure:</h2>';
        output += '<pre>' + JSON.stringify(sampleData, null, 2) + '</pre>';

        output += '<h2>Processing Results:</h2>';

        Object.entries(sampleData).forEach(([timestamp, values]) => {
            const loadKw = Math.abs(values.load_p / 1000);
            output += `<p>Timestamp: ${timestamp}</p>`;
            output += `<p>Load: ${values.load_p}W â†’ ${loadKw}kW</p>`;
            output += `<p>PV: ${values.pv_p}W, Battery: ${values.battery_p}W, Grid: ${values.grid_p}W</p>`;
            output += `<p>Energy Balance Check: PV(${values.pv_p}) + Battery(${values.battery_p}) + Grid(${values.grid_p}) = ${values.pv_p + values.battery_p + values.grid_p} (should equal Load: ${values.load_p})</p>`;
            output += '<hr>';
        });

        document.getElementById('output').innerHTML = output;
    </script>
</body>

</html>